php每日自动天气预报 版本2.2

主要用途
1.获取城市天气预报
2.在线给好友或自己发送飞信,添加好友
3.调用飞信api接口
4.定时发送天气预报[可群发]
版本更新:http://xiaogg.ctdisk.com/u/349707/437278 [新版本不公开,如需要研究请捐助本站后联系作者]
官方主页:http://w.ibtf.net/
天气数据来源中国天气网
中国天气网天气预报插件数据更新时间为：每天早7点30分、晚18点30分，本站每小时同步中国天气网当天天气一次。

新浪SAE免费php空间申请地址:http://sae.sina.com.cn/activity/invite/101149/weibo
新浪SAE免费php空间注册功略:http://hbwanghai.blog.163.com/blog/static/199297147201222310226519/
捐助本站:https://me.alipay.com/xiaogg
优点
1.不用购买独立空间/服务器,不用购买独立域名 直接申请sina_SAE空间即可
2.所有代码开源.下载,修改配置后,上传直接可用.方便进行再开发
3.如不想用sina_SAE也可以下载通用版[必须有服务器支持]
4.集成飞信api接口,可实现在线调用.便于开发其它应用
5.集成在线发飞信.可直接在线给好友发短信,不用登录软件.

2.2----------版本更新
更新内容
1.修改飞信类增加验证码登录
2.主网站增加查看好友信息功能 同时主网站api接口也支持查看好友信息
3.readme.txt修改为UTF-8编码如出现查看文件乱码情况,请修正浏览器编码
4.主网站增加天气预报视频

2.1----------版本更新
更新内容
1.修改飞信类 增加对csrfToken的获取
2.增加免费接口http://2.ibtf.sinaapp.com/ 功能:(1)只能发短信(2)有统计代码(3)有广告(4)免费使用
3.增加VIP接口http://1.ibtf.sinaapp.com/
功能
(1)发短信(2)检测是否是好友(3)发起好友邀请(4)查看好友信息(5)需要购买VIP key 一次购买永久使用
(6)无任何广告及统计代码(7)不保存任何信息,不对调用次数做统计(8)使用人数少访问高速
(9)购买地址:http://item.taobao.com/item.htm?id=18776916628
返回结果说明
一.短信
发送成功 : 1
发送失败 : 0
二.检查好友
是好友: 1
非好友: 0
三.添加好友
发送申请成功:1
发送申请失败:0
四.查看好友信息
直接返回好友信息字符串 

2.0----------版本更新
更新内容
1.采用全新界面
2.修改飞信接口函数
3.添加功能(1)查找是否为飞信好友(2)在线发出添加好友申请
4.添加api参数 type
	使用方法
	API调用:f.php?phone=xxxxxx&pwd=xxx&to=xxxx&msg=xxxx&type=0
	type:操作 0(空)发送短信 1检查好友 2添加好友

1.3----------版本更新
更新内容
1.修改部分错误
2.增加前台天气图片显示结果

1.2----------版本更新
更新内容
1.更改天气获取函数优化json数据获取
2.增加每日天气密码安全验证.
  修改方法lib/config.php文件第五行 双引号里面的为密码 然后修改config.yaml 修改weather.php?pwd=这里为您修改后的密码 然后保存
3.增加QQ咨询,QQ号在index.php顶部版权当中.有问题可以加QQ咨询!
说明,当前版本不做通用版更新.如需要通用版请联系作者QQ.


1.1-1--------版本更新
更新内容
1.o[]   其它选项(可多选) 增加4洗车指数 5旅游指数 6舒适度指数 7晨练指数 8晾晒指数 9息斯敏过敏气象指数
2.修改weather.php文件
[1.1版本有错误]需要将17行修改为$sys=explode("|",$val);$msg=getweather(array("city"=>$sys[1]));
3.修改缓存文件命名规则
4.增加获取第几天为月份中的几日的函数

1.1----------版本更新
更新内容
1.默认时间设置为7:40AM 以获取及时的天气预报,[此功能可以用于闹钟]
2.修改调用天气预报链接,以减少fetchurl数据量
3.精简了data.txt文件并缓存
4.增加自定义天气预报格式
5.去掉wtext缓存函数集成到getweather中
6.新版本参数说明
city 城市名,一般不要加市/县
day  调用几天的天气预报 1 2 3 4 5 6
temp 气温显示 默认为1 ℃ 可选2 ℉
o[]   其它选项(可多选):1风力风向[默认] 2紫外线指数 3穿衣指数 
type  默认为1 天气预报格式 0短信天气[为减少短信字数,精简了很多内容]


1.0----------版本更新
1.如遇到用f.php发送短信,收到乱码情况,请修改f.php文件
修改方法:
长到13行
if($u==""){
修改为
if($u=="1"){


包含主要文件有
index.php    获取城市天气预报
f.php        飞信api接口及在线发飞信
weather.php  每日执行文件
data.txt     城市数据
config.yaml  sina_SAE配置文件
lib/PHPFetion.php       php飞信类
lib/function.php        函数库
lib/config.php          配置文件

主要文件说是

index.php
[主要目的配合定时发送天所预报,测试是否能够获取当时天气预报]

说明
1.在查询后面的文本框中输入您要查询的城市名称[不要带市/县等][不支持省]
2.点击查询将可以获取今日天气.[今日缓存数据]
3.获取最新点击下面 [获取最新天气预报]
4.可以通过下面的飞信接口发送到手机上

f.php
可直接添写相应选项后点发送也可利用API发送
API调用:f.php?phone=xxxxxx&pwd=xxx&to=xxxx&msg=xxxx
以上接口参数详细说明
phone 	手机号
pwd 	飞信密码
to 	发送给谁(手机号或飞信号)
msg 	飞信内容
u 	备用参数:当发送内容为乱码时 在最后加上&u=1


weather.php / config.php--------------------------------------------- [每日天气配置]
需要自行配置
配置方法
1.用Dreamweaver或其它编辑软件打开weather.php文件
2.找到第12行
$phone="150********|唐山;134********|唐山;151********|石家庄;150********|石家庄";
按照以上规则进行配置.双引号中规则为:手机号|城市名;手机号|城市名 标题不能错全为英文状态下标点
3.打开inc/config.php
修改第8行和第9行
define("PHONE_NUMBER","150********");将双引号中的手机号改成你的手机号
define("PHONE_PWD","******");将双引号中的*改成您的飞信密码
4.修改什么时候发天气预报
修改config.yaml文件
配置详解:http://sae.sina.com.cn/?m=devcenter&catId=195
